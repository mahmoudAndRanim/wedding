<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>محمود و رنيم – دعوة زفاف</title>
    <meta name="description" content="Wedding invitation for Mahmoud & Ranim - March 28, 2026">
    <meta name="theme-color" content="#0A0806">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&family=Aref+Ruqaa:wght@400;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500&family=Montserrat:wght@200;300;400;500;600&family=Great+Vibes&family=Noto+Naskh+Arabic:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=block" rel="stylesheet">

    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <!-- tsParticles -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles-engine@2.12.0/tsparticles.engine.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles-slim@2.12.0/tsparticles.slim.bundle.min.js"></script>
    <!-- Lenis Smooth Scroll -->
    <script src="https://unpkg.com/lenis@1.1.14/dist/lenis.min.js"></script>

    <style>
        /* ═══════════════════════
           RESET & FOUNDATION
           ═══════════════════════ */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #0A0806;
            --bg-alt: #110F0B;
            --bg-card: #141210;
            --gold: #C8A97D;
            --gold-light: #E8D5B5;
            --gold-pale: #F0E6D3;
            --gold-muted: #9E8A6A;
            --gold-dark: #7A694C;
            --rose: #D4A88C;
            --cream: #F8F3EC;
            --text: rgba(255,255,255,0.82);
            --text-dim: rgba(255,255,255,0.42);
            --text-faint: rgba(255,255,255,0.22);
        }

        html { scroll-behavior: auto; }

        body {
            font-family: 'Noto Naskh Arabic', 'Amiri', serif;
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        body[dir="ltr"] { font-family: 'Cormorant Garamond', 'Montserrat', serif; }

        /* SVG Ornament (reusable arabesque divider) */
        .ornament-svg {
            display: block;
            margin: 0 auto;
            width: clamp(120px, 30vw, 220px);
            height: auto;
            opacity: 0.5;
        }
        .ornament-svg path { fill: var(--gold-muted); }

        /* ═══════════════════════════════════════════
           ENVELOPE — Premium Fullscreen Intro
           ═══════════════════════════════════════════ */
        .envelope-overlay {
            position: fixed;
            inset: 0;
            z-index: 9999;
            pointer-events: all;
            overflow: hidden;
            background: #C9BDAA;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .envelope-overlay::before {
            content: '';
            position: absolute; inset: 0;
            background: radial-gradient(ellipse at 50% 35%, transparent 40%, rgba(0,0,0,0.12) 100%);
            pointer-events: none;
            z-index: 10002;
        }

        .envelope-overlay.done { pointer-events: none; opacity: 0; visibility: hidden; }

        .envelope-wrapper {
            position: relative;
            width: 100vh; height: 100vw;
            transform: rotate(-90deg);
            transform-origin: center;
            perspective: 1200px;
        }

        /* Envelope body — layered paper */
        .envelope-body {
            position: absolute; inset: 0;
            background: linear-gradient(176deg,
                #D8CEBC 0%, #D4C9B5 12%, #D0C4AE 28%,
                #CCBFA8 45%, #C7B99F 62%, #C2B397 78%, #BDAE91 100%);
            z-index: 1;
        }
        .envelope-body::before {
            content: ''; position: absolute; inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='400' height='400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='p'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='8' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='400' height='400' filter='url(%23p)' opacity='0.1'/%3E%3C/svg%3E");
            z-index: 2; pointer-events: none;
        }
        .envelope-body::after {
            content: ''; position: absolute; inset: 0;
            background-image:
                url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='f'%3E%3CfeTurbulence type='turbulence' baseFrequency='1.2' numOctaves='5' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23f)' opacity='0.06'/%3E%3C/svg%3E"),
                url("data:image/svg+xml,%3Csvg width='500' height='500' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='s'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.95' numOctaves='2' seed='7' stitchTiles='stitch'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='0 0 0 0 0 0 0 0 0.12'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='500' height='500' filter='url(%23s)' fill='%23352a15'/%3E%3C/svg%3E");
            z-index: 3; pointer-events: none;
        }

        /* Shadow from edge — gives depth */
        .envelope-edge-shadow {
            position: absolute; inset: 0; z-index: 4; pointer-events: none;
            box-shadow: inset 0 0 60px rgba(0,0,0,0.08), inset 0 0 120px rgba(0,0,0,0.04);
        }

        /* Flaps */
        .envelope-flap-bottom {
            position: absolute; bottom: 0; left: 0;
            width: 100%; height: 58%; z-index: 10; pointer-events: none;
        }
        .envelope-flap-bottom::before {
            content: ''; position: absolute; bottom: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(0deg, #D1C7B1 0%, #CEC3AB 40%, #CABEA5 100%);
            clip-path: polygon(0% 18%, 50% 0%, 100% 18%, 100% 100%, 0% 100%);
        }
        .envelope-flap-bottom::after {
            content: ''; position: absolute; bottom: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(180deg, rgba(0,0,0,0.14) 0%, rgba(0,0,0,0.04) 3%, transparent 8%);
            clip-path: polygon(0% 18%, 50% 0%, 100% 18%, 100% 100%, 0% 100%);
            pointer-events: none;
        }

        .envelope-flap-left {
            position: absolute; top: 0; left: 0;
            width: 52%; height: 100%; z-index: 8; pointer-events: none;
        }
        .envelope-flap-left::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(90deg, #D0C7AF 0%, #CDC4AB 50%, #C9BFA5 100%);
            clip-path: polygon(0% 0%, 100% 42%, 100% 58%, 0% 100%);
        }
        .envelope-flap-left::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(270deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.03) 5%, transparent 12%);
            clip-path: polygon(0% 0%, 100% 42%, 100% 58%, 0% 100%);
        }

        .envelope-flap-right {
            position: absolute; top: 0; right: 0;
            width: 52%; height: 100%; z-index: 9; pointer-events: none;
        }
        .envelope-flap-right::before {
            content: ''; position: absolute; top: 0; right: 0;
            width: 100%; height: 100%;
            background: linear-gradient(270deg, #CFC6AE 0%, #CCC2A9 50%, #C8BDA2 100%);
            clip-path: polygon(100% 0%, 0% 42%, 0% 58%, 100% 100%);
        }
        .envelope-flap-right::after {
            content: ''; position: absolute; top: 0; right: 0;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, rgba(0,0,0,0.09) 0%, rgba(0,0,0,0.025) 5%, transparent 12%);
            clip-path: polygon(100% 0%, 0% 42%, 0% 58%, 100% 100%);
        }

        /* Top flap — 3D animated */
        .envelope-flap-top {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 42%;
            transform-origin: top center;
            transform-style: preserve-3d;
            z-index: 15;
        }
        .flap-face {
            position: absolute; inset: 0;
            backface-visibility: hidden;
        }
        .flap-front {
            background: linear-gradient(180deg, #DBD2C2 0%, #D5CBB8 40%, #CFc5AD 100%);
            clip-path: polygon(0% 0%, 50% 100%, 100% 0%);
        }
        .flap-front::before {
            content: ''; position: absolute; inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='300' height='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='7' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='0.07'/%3E%3C/svg%3E");
            clip-path: polygon(0% 0%, 50% 100%, 100% 0%); pointer-events: none;
        }
        .flap-front::after {
            content: ''; position: absolute; bottom: 0; left: 5%; width: 90%; height: 22%;
            background: linear-gradient(to top, rgba(0,0,0,0.1), rgba(0,0,0,0.02) 50%, transparent);
            clip-path: polygon(0% 100%, 50% 0%, 100% 100%); pointer-events: none;
        }
        .flap-back {
            background: linear-gradient(0deg, #B8943A 0%, #A88530 40%, #957525 100%);
            clip-path: polygon(0% 0%, 50% 100%, 100% 0%);
            transform: rotateX(180deg);
        }

        .envelope-lining {
            position: absolute; top: 0; left: 1%;
            width: 98%; height: 42%;
            background: linear-gradient(180deg, #BF9D4E 0%, #B08E38 50%, #9E8028 100%);
            clip-path: polygon(0% 0%, 50% 95%, 100% 0%);
            z-index: 5; opacity: 0.7;
        }

        .flap-crease-shadow {
            position: absolute; top: 40%; left: 8%; width: 84%; height: 10px;
            background: radial-gradient(ellipse, rgba(0,0,0,0.12) 0%, rgba(0,0,0,0.04) 40%, transparent 80%);
            z-index: 14;
        }
        .flap-crease-shadow.hidden { opacity: 0; }

        /* Card — luxurious with corner ornaments */
        .envelope-card {
            position: absolute; top: 14%; left: 7%;
            width: 86%; height: 62%;
            background: linear-gradient(170deg, #FFFEF9 0%, #FBF8F1 30%, #F6F2E8 65%, #F0ECE0 100%);
            border-radius: 2px; z-index: 6;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 2rem 1.5rem;
            box-shadow: 0 4px 30px rgba(0,0,0,0.12), 0 0 0 1px rgba(180,160,110,0.1);
            opacity: 0;
        }
        /* Double border frame */
        .envelope-card::before {
            content: ''; position: absolute;
            top: 14px; left: 14px; right: 14px; bottom: 14px;
            border: 1px solid rgba(180,148,60,0.2);
            pointer-events: none;
        }
        .envelope-card::after {
            content: ''; position: absolute;
            top: 18px; left: 18px; right: 18px; bottom: 18px;
            border: 1px solid rgba(180,148,60,0.08);
            pointer-events: none;
        }

        /* Corner flourishes on card */
        .card-corner {
            position: absolute; width: 28px; height: 28px;
            opacity: 0.3;
        }
        .card-corner svg { width: 100%; height: 100%; }
        .card-corner path { fill: #B8943A; }
        .cc-tl { top: 10px; left: 10px; }
        .cc-tr { top: 10px; right: 10px; transform: scaleX(-1); }
        .cc-bl { bottom: 10px; left: 10px; transform: scaleY(-1); }
        .cc-br { bottom: 10px; right: 10px; transform: scale(-1, -1); }

        .card-bismillah {
            font-family: 'Aref Ruqaa', serif;
            font-size: clamp(0.65rem, 2vw, 0.85rem);
            color: #B8943A;
            margin-bottom: 0.6rem;
            opacity: 0.7;
        }

        .card-divider {
            width: 40px; height: 1px;
            background: linear-gradient(90deg, transparent, #C8A97D, transparent);
            margin: 0.35rem auto;
        }

        .card-names {
            font-family: 'Playfair Display', 'Aref Ruqaa', serif;
            font-size: clamp(1.6rem, 5vw, 2.8rem);
            font-weight: 400;
            color: #6A5D42;
            text-align: center; line-height: 1.3;
            letter-spacing: 0.02em;
        }
        .card-and {
            font-family: 'Great Vibes', cursive;
            font-size: clamp(1rem, 3vw, 1.5rem);
            color: #B8943A;
            display: block; margin: 0.15rem 0;
        }
        .card-date {
            font-family: 'Montserrat', sans-serif;
            font-weight: 200;
            font-size: clamp(0.5rem, 1.5vw, 0.7rem);
            letter-spacing: 0.5em;
            color: #A8976E;
            margin-top: 0.6rem;
        }

        /* Wax seal — organic shape with monogram */
        .envelope-seal {
            position: absolute; z-index: 20;
            top: 43%; left: 50%;
            transform: translate(-50%, -50%);
            width: clamp(72px, 18vw, 115px);
            height: clamp(72px, 18vw, 115px);
            cursor: pointer; pointer-events: all;
            filter: drop-shadow(0 6px 20px rgba(0,0,0,0.4));
        }
        .seal-body {
            width: 100%; height: 100%;
            border-radius: 47% 53% 49% 51% / 52% 48% 52% 48%;
            background: radial-gradient(circle at 40% 34%,
                #F0D88A, #E8CE7E 8%, #D4B560 18%, #C6A75E 30%,
                #B89535 46%, #A58528 60%, #8D7222 75%, #7A6218 88%, #6D5815);
            box-shadow:
                inset 0 6px 12px rgba(255,230,150,0.45),
                inset 0 -6px 14px rgba(0,0,0,0.4),
                inset 3px 0 8px rgba(255,230,150,0.15),
                inset -3px 0 8px rgba(0,0,0,0.15),
                0 5px 15px rgba(0,0,0,0.35);
            display: flex; align-items: center; justify-content: center;
            position: relative; overflow: hidden;
        }
        .seal-rim {
            position: absolute; inset: 0;
            border-radius: 47% 53% 49% 51% / 52% 48% 52% 48%;
            border: 2.5px solid rgba(0,0,0,0.12);
            box-shadow: inset 0 0 0 3px rgba(255,230,150,0.06), inset 0 0 10px rgba(0,0,0,0.22);
            pointer-events: none;
        }
        .seal-body::before {
            content: ''; position: absolute; inset: 0;
            border-radius: 50%;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='w'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='2.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23w)' opacity='0.12'/%3E%3C/svg%3E");
            z-index: 1; pointer-events: none;
        }
        .seal-body::after {
            content: ''; position: absolute;
            top: 4%; left: 16%; width: 58%; height: 30%;
            border-radius: 50%;
            background: radial-gradient(ellipse, rgba(255,240,200,0.35) 0%, rgba(255,230,180,0.1) 50%, transparent 80%);
            z-index: 2; pointer-events: none;
        }
        .seal-inner-ring {
            position: absolute;
            top: 14%; left: 14%; right: 14%; bottom: 14%;
            border-radius: 50%;
            border: 1.5px solid rgba(255,230,150,0.18);
            box-shadow: inset 0 1px 2px rgba(255,255,255,0.12), inset 0 -1px 2px rgba(0,0,0,0.18), 0 1px 1px rgba(0,0,0,0.1);
            z-index: 3; pointer-events: none;
        }

        /* Monogram initials inside seal */
        .seal-monogram {
            position: relative; z-index: 4;
            font-family: 'Playfair Display', serif;
            font-size: clamp(0.7rem, 2.5vw, 1.1rem);
            font-weight: 500;
            font-style: italic;
            color: rgba(60,45,15,0.55);
            text-shadow: 0 1px 1px rgba(255,230,150,0.2);
            letter-spacing: 0.05em;
            user-select: none;
        }
        .seal-monogram-amp {
            font-family: 'Great Vibes', cursive;
            font-size: clamp(0.9rem, 3vw, 1.3rem);
            margin: 0 1px;
            vertical-align: middle;
            font-style: normal;
        }

        .seal-half { position: absolute; top: 0; width: 50%; height: 100%; overflow: hidden; }
        .seal-half-left { left: 0; border-radius: 50% 0 0 50%; }
        .seal-half-right { right: 0; border-radius: 0 50% 50% 0; }
        .seal-half-inner {
            position: absolute; top: 0; width: 200%; height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 42% 38%, #D4B560, #C6A75E 25%, #B89535 45%, #A58528 65%, #8B7020);
            box-shadow: inset 0 4px 8px rgba(255,230,150,0.3), inset 0 -4px 8px rgba(0,0,0,0.25);
        }
        .seal-half-left .seal-half-inner { left: 0; }
        .seal-half-right .seal-half-inner { right: 0; }
        .envelope-seal.breaking { pointer-events: none; }

        .seal-hint {
            position: absolute; bottom: -34px; left: 50%;
            transform: translateX(-50%); white-space: nowrap;
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; font-size: 0.42rem;
            letter-spacing: 0.35em; text-transform: uppercase;
            color: #B0A08A; opacity: 0;
        }

        .seal-breathing { animation: sealBreathe 3.5s ease-in-out infinite; }
        @keyframes sealBreathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.035); }
        }
        .fonts-loaded .seal-hint { animation: sealHintPulse 4s ease-in-out infinite 2.5s; }
        @keyframes sealHintPulse {
            0%, 100% { opacity: 0; }
            50% { opacity: 0.55; }
        }

        .envelope-particles {
            position: fixed; inset: 0;
            pointer-events: none; z-index: 10001; overflow: hidden;
        }
        .envelope-overlay.done .envelope-particles { display: none; }

        /* ═══════════════════════════════════════════
           LANG TOGGLE
           ═══════════════════════════════════════════ */
        .lang-toggle {
            position: fixed; top: 1.6rem; left: 1.6rem; z-index: 200;
        }
        body[dir="ltr"] .lang-toggle { left: auto; right: 1.6rem; }

        .lang-btn {
            background: rgba(200,169,125,0.06);
            border: 1px solid rgba(200,169,125,0.2);
            color: var(--gold);
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; font-size: 0.6rem;
            letter-spacing: 0.25em; text-transform: uppercase;
            padding: 0.55rem 1.5rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(.25,.46,.45,.94);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
        }
        .lang-btn:hover {
            background: var(--gold);
            color: var(--bg);
            border-color: var(--gold);
        }

        /* ═══════════════════════════════════════════
           HERO
           ═══════════════════════════════════════════ */
        .hero {
            position: relative;
            min-height: 100vh; min-height: 100svh;
            display: flex; align-items: center; justify-content: center;
            background: var(--bg);
            overflow: hidden;
        }

        /* Atmospheric light */
        .hero::before {
            content: ''; position: absolute; inset: 0;
            background:
                radial-gradient(ellipse 80% 60% at 50% 25%, rgba(200,169,125,0.07) 0%, transparent 70%),
                radial-gradient(ellipse 50% 50% at 20% 80%, rgba(200,169,125,0.025) 0%, transparent 60%),
                radial-gradient(ellipse 50% 50% at 80% 80%, rgba(200,169,125,0.025) 0%, transparent 60%);
            pointer-events: none;
        }
        /* Film grain */
        .hero::after {
            content: ''; position: absolute; inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='300' height='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23g)' opacity='0.025'/%3E%3C/svg%3E");
            pointer-events: none; z-index: 1;
        }

        /* Subtle geometric Islamic pattern overlay on hero */
        .hero-pattern {
            position: absolute; inset: 0;
            pointer-events: none; z-index: 0;
            opacity: 0.018;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23C8A97D' stroke-width='0.5'%3E%3Cpath d='M30 0L60 30L30 60L0 30z'/%3E%3Cpath d='M30 10L50 30L30 50L10 30z'/%3E%3C/g%3E%3C/svg%3E");
            background-size: 60px 60px;
        }

        #heroParticles {
            position: absolute; inset: 0;
            pointer-events: none; z-index: 1;
        }

        .hero-content {
            position: relative; text-align: center;
            z-index: 2; padding: 3rem 2rem; max-width: 720px;
        }

        .bismillah {
            font-family: 'Aref Ruqaa', serif;
            font-size: clamp(1rem, 2.8vw, 1.5rem);
            color: var(--gold-light);
            margin-bottom: 2.5rem;
            opacity: 0;
        }

        .quran-verse {
            font-family: 'Amiri', serif;
            font-size: clamp(0.92rem, 2.3vw, 1.15rem);
            color: var(--gold-muted);
            margin: 0 auto 2.5rem;
            line-height: 2.5; max-width: 560px;
            opacity: 0;
        }
        body[dir="ltr"] .quran-verse { direction: rtl; font-family: 'Amiri', serif; }
        .verse-ref {
            font-size: 0.65rem; color: var(--gold-dark);
            opacity: 0.55; display: block; margin-top: 0.5rem;
        }

        .hero-ornament {
            display: flex; align-items: center; justify-content: center;
            gap: 1rem; margin-bottom: 2.5rem; opacity: 0;
        }
        .hero-ornament-line {
            width: clamp(30px, 8vw, 60px); height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold-dark));
        }
        .hero-ornament-line:last-child {
            background: linear-gradient(90deg, var(--gold-dark), transparent);
        }
        .hero-ornament-diamond {
            width: 5px; height: 5px;
            border: 1px solid var(--gold-dark);
            transform: rotate(45deg);
            flex-shrink: 0;
        }

        .invite-text {
            font-family: 'Noto Naskh Arabic', serif;
            font-weight: 400;
            font-size: clamp(0.82rem, 1.8vw, 0.95rem);
            color: var(--text-dim);
            margin-bottom: 1.5rem;
            letter-spacing: 0.04em; line-height: 2;
            opacity: 0;
        }
        body[dir="ltr"] .invite-text {
            font-family: 'Montserrat', sans-serif;
            font-weight: 200; font-size: clamp(0.65rem, 1.3vw, 0.78rem);
            letter-spacing: 0.45em; text-transform: uppercase; line-height: 1.8;
        }

        .couple-names {
            font-family: 'Aref Ruqaa', serif;
            font-size: clamp(3.2rem, 11vw, 7.5rem);
            font-weight: 400;
            color: var(--gold);
            line-height: 1.2; margin-bottom: 0.3rem;
            opacity: 0;
            text-shadow: 0 0 80px rgba(200,169,125,0.12);
        }
        body[dir="ltr"] .couple-names {
            font-family: 'Great Vibes', cursive; line-height: 1.05;
        }
        .couple-and {
            font-family: 'Aref Ruqaa', serif;
            font-size: clamp(1.1rem, 2.8vw, 1.6rem);
            font-weight: 400; color: var(--gold-dark);
            margin: 0.15rem 0; display: block; opacity: 0;
        }
        body[dir="ltr"] .couple-and {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 300; font-style: italic;
        }

        .wedding-date-hero {
            font-family: 'Montserrat', sans-serif;
            font-weight: 200;
            font-size: clamp(0.65rem, 1.4vw, 0.8rem);
            letter-spacing: 0.6em; color: var(--gold-muted);
            margin-top: 2rem; opacity: 0;
        }

        .adults-notice {
            display: inline-block; margin-top: 2.5rem;
            padding: 1rem 3rem;
            border: 1px solid rgba(200,169,125,0.12);
            font-family: 'Aref Ruqaa', serif;
            font-size: 0.9rem; color: var(--gold-dark);
            opacity: 0; position: relative;
        }
        body[dir="ltr"] .adults-notice {
            font-family: 'Cormorant Garamond', serif;
            font-style: italic; font-size: 0.85rem;
        }
        .adults-notice::before {
            content: ''; position: absolute;
            top: 4px; left: 4px; right: 4px; bottom: 4px;
            border: 1px solid rgba(200,169,125,0.06);
            pointer-events: none;
        }
        .adults-sub {
            display: block;
            font-family: 'Noto Naskh Arabic', serif;
            font-size: 0.7rem; color: var(--text-dim); margin-top: 0.3rem;
        }
        body[dir="ltr"] .adults-sub {
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; font-size: 0.6rem;
        }

        .scroll-cue {
            position: absolute; bottom: 3rem; left: 50%;
            transform: translateX(-50%);
            display: flex; flex-direction: column; align-items: center; gap: 0.8rem;
            opacity: 0;
        }
        .scroll-cue span {
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; font-size: 0.5rem;
            letter-spacing: 0.45em; text-transform: uppercase;
            color: var(--gold-dark);
        }
        .scroll-cue-line {
            width: 1px; height: 55px;
            background: linear-gradient(to bottom, var(--gold-dark), transparent);
            animation: scrollPulse 2.8s ease-in-out infinite;
        }
        @keyframes scrollPulse {
            0%, 100% { opacity: 0.15; transform: scaleY(0.5); }
            50% { opacity: 0.75; transform: scaleY(1); }
        }

        /* ═══════════════════════════════════════════
           COUNTDOWN
           ═══════════════════════════════════════════ */
        .countdown-section {
            background: var(--bg-alt);
            padding: 8rem 2rem;
            position: relative; overflow: hidden;
        }

        /* Top decorative border */
        .section-border-top {
            position: absolute; top: 0; left: 0; right: 0;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 0%, var(--gold-dark) 20%,
                var(--gold) 50%, var(--gold-dark) 80%, transparent 100%);
            opacity: 0.3;
        }

        .section-title-sm {
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; font-size: 0.55rem;
            letter-spacing: 0.6em; text-transform: uppercase;
            text-align: center; color: var(--gold-dark);
            margin-bottom: 3.5rem;
        }

        .countdown-wrap {
            display: flex; justify-content: center;
            max-width: 750px; margin: 0 auto; direction: ltr;
            gap: 0;
        }
        .cd-item {
            flex: 1; text-align: center;
            padding: 2.5rem 1rem; position: relative;
        }
        .cd-item:not(:last-child)::after {
            content: '';
            position: absolute; right: 0; top: 25%; height: 50%;
            width: 1px;
            background: linear-gradient(to bottom, transparent, var(--gold-dark), transparent);
            opacity: 0.25;
        }
        .cd-num {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(3rem, 9vw, 5.5rem);
            font-weight: 300; color: var(--gold);
            line-height: 1; display: block;
            letter-spacing: -0.03em;
        }
        .cd-label {
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; font-size: 0.55rem;
            letter-spacing: 0.35em; text-transform: uppercase;
            color: var(--text-dim); margin-top: 1.2rem;
            display: block;
        }

        /* ═══════════════════════════════════════════
           DETAILS
           ═══════════════════════════════════════════ */
        .details-section {
            background: var(--bg);
            padding: 8rem 2rem; position: relative;
        }

        .section-head {
            text-align: center; margin-bottom: 5rem;
        }
        .section-head h2 {
            font-family: 'Aref Ruqaa', serif;
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            font-weight: 400; color: var(--gold);
            margin-bottom: 1.5rem;
        }
        body[dir="ltr"] .section-head h2 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 300; font-size: clamp(1.8rem, 5vw, 3rem);
            letter-spacing: 0.08em;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            max-width: 960px; margin: 0 auto;
        }

        .d-card {
            text-align: center; padding: 3.5rem 2rem;
            position: relative;
            border: 1px solid rgba(200,169,125,0.06);
            transition: border-color 0.6s ease;
        }
        .d-card:hover { border-color: rgba(200,169,125,0.15); }

        /* SVG icons instead of emojis */
        .d-icon {
            width: 32px; height: 32px;
            margin: 0 auto 1.8rem;
            display: block;
        }
        .d-icon svg {
            width: 100%; height: 100%;
            stroke: var(--gold-muted);
            stroke-width: 1.2;
            fill: none;
        }

        .d-card h3 {
            font-family: 'Aref Ruqaa', serif;
            font-size: 1.2rem; font-weight: 400;
            color: var(--gold); margin-bottom: 1rem;
            letter-spacing: 0.02em;
        }
        body[dir="ltr"] .d-card h3 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 400; font-size: 1.15rem;
            letter-spacing: 0.1em;
        }
        .d-card p {
            font-family: 'Noto Naskh Arabic', serif;
            font-weight: 400; font-size: 0.9rem;
            line-height: 1.9; color: var(--text-dim);
        }
        body[dir="ltr"] .d-card p {
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; font-size: 0.82rem;
        }

        /* ═══════════════════════════════════════════
           RSVP
           ═══════════════════════════════════════════ */
        .rsvp-section {
            background: var(--bg-alt);
            padding: 8rem 2rem; position: relative;
        }

        .rsvp-box {
            max-width: 440px; margin: 0 auto;
            border: 1px solid rgba(200,169,125,0.1);
            padding: 3.5rem 2.5rem;
            position: relative;
        }
        .rsvp-box::before {
            content: ''; position: absolute;
            top: 6px; left: 6px; right: 6px; bottom: 6px;
            border: 1px solid rgba(200,169,125,0.05);
            pointer-events: none;
        }

        .rsvp-form { display: flex; flex-direction: column; gap: 1.5rem; }

        .input-field {
            width: 100%; padding: 1.1rem 1.5rem;
            background: rgba(200,169,125,0.03);
            border: 1px solid rgba(200,169,125,0.12);
            color: var(--text);
            font-family: 'Noto Naskh Arabic', serif;
            font-weight: 400; font-size: 0.95rem;
            outline: none; text-align: center;
            transition: all 0.4s ease;
        }
        body[dir="ltr"] .input-field {
            font-family: 'Montserrat', sans-serif; font-weight: 300;
        }
        .input-field::placeholder {
            color: var(--text-faint); text-align: center;
        }
        .input-field:focus {
            border-color: var(--gold);
            background: rgba(200,169,125,0.05);
            box-shadow: 0 0 0 1px rgba(200,169,125,0.08);
        }

        .submit-btn {
            display: block; width: 100%; padding: 1.1rem;
            background: transparent;
            border: 1px solid var(--gold-dark);
            color: var(--gold);
            font-family: 'Noto Naskh Arabic', serif;
            font-weight: 500; font-size: 0.95rem;
            cursor: pointer; position: relative; overflow: hidden;
            transition: color 0.4s ease, border-color 0.4s ease;
        }
        body[dir="ltr"] .submit-btn {
            font-family: 'Montserrat', sans-serif;
            font-weight: 400; font-size: 0.7rem;
            letter-spacing: 0.35em; text-transform: uppercase;
        }
        .submit-btn::before {
            content: ''; position: absolute; inset: 0;
            background: var(--gold);
            transform: scaleX(0); transform-origin: left;
            transition: transform 0.55s cubic-bezier(.25,.46,.45,.94);
            z-index: 0;
        }
        .submit-btn:hover::before { transform: scaleX(1); }
        .submit-btn:hover { color: var(--bg); border-color: var(--gold); }
        .submit-btn span { position: relative; z-index: 1; }

        .rsvp-success {
            text-align: center; display: none; padding: 2rem;
        }
        .rsvp-success.show { display: block; }
        .rsvp-success h3 {
            font-family: 'Aref Ruqaa', serif;
            font-size: 2.5rem; color: var(--gold); margin-bottom: 1rem;
        }
        body[dir="ltr"] .rsvp-success h3 { font-family: 'Great Vibes', cursive; }
        .rsvp-success p {
            font-family: 'Noto Naskh Arabic', serif;
            font-weight: 400; color: var(--text-dim);
        }
        body[dir="ltr"] .rsvp-success p {
            font-family: 'Montserrat', sans-serif; font-weight: 300;
        }

        /* ═══════════════════════════════════════════
           MAP
           ═══════════════════════════════════════════ */
        .map-section {
            background: var(--bg); padding: 6rem 2rem; position: relative;
        }
        .map-frame {
            max-width: 900px; margin: 0 auto;
            border: 1px solid rgba(200,169,125,0.08);
            position: relative; overflow: hidden;
        }
        .map-frame::before {
            content: ''; position: absolute;
            top: 5px; left: 5px; right: 5px; bottom: 5px;
            border: 1px solid rgba(200,169,125,0.04);
            pointer-events: none; z-index: 1;
        }
        .map-frame iframe {
            width: 100%; height: 380px; border: none; display: block;
            filter: grayscale(0.6) contrast(1.1) brightness(0.75);
        }

        /* ═══════════════════════════════════════════
           FOOTER
           ═══════════════════════════════════════════ */
        .site-footer {
            background: var(--bg);
            text-align: center; padding: 6rem 2rem 4rem;
            position: relative;
        }

        .footer-names {
            font-family: 'Aref Ruqaa', serif;
            font-size: clamp(2rem, 5vw, 3.2rem);
            color: var(--gold); margin-bottom: 0.8rem;
        }
        body[dir="ltr"] .footer-names { font-family: 'Great Vibes', cursive; }

        .footer-date {
            font-family: 'Montserrat', sans-serif;
            font-weight: 200; font-size: 0.65rem;
            letter-spacing: 0.45em; color: var(--gold-dark);
            margin-bottom: 2.5rem;
        }
        .footer-heart {
            color: var(--gold-dark); font-size: 0.9rem;
            animation: heartPulse 2.2s ease-in-out infinite;
        }
        @keyframes heartPulse {
            0%, 100% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        /* ═══════════════════════════════════════════
           RESPONSIVE
           ═══════════════════════════════════════════ */
        @media (max-width: 768px) {
            .hero-content { padding: 2rem 1.2rem; }
            .quran-verse {
                font-size: 0.88rem; line-height: 2.1;
                padding: 0 0.5rem;
            }
            .details-grid {
                grid-template-columns: 1fr;
                max-width: 420px;
            }
            .d-card { padding: 2.2rem 1.5rem; }
            .countdown-section, .details-section, .rsvp-section {
                padding: 5.5rem 1.5rem;
            }
            .cd-item { padding: 1.8rem 0.5rem; }
            .rsvp-box { padding: 2.5rem 1.5rem; }
            .map-frame iframe { height: 260px; }
        }
        @media (max-width: 480px) {
            .couple-names { font-size: clamp(2.4rem, 14vw, 4rem); }
            .bismillah { font-size: 0.95rem; }
            .cd-num { font-size: clamp(2.2rem, 12vw, 3.5rem); }
            .adults-notice {
                font-size: 0.8rem; padding: 0.7rem 1.5rem;
            }
            .scroll-cue { bottom: 1.5rem; }
            .rsvp-box { padding: 2rem 1.2rem; }
        }
    </style>
</head>
<body dir="rtl">

    <!-- ═══════ ENVELOPE ═══════ -->
    <div class="envelope-overlay" id="envelopeOverlay">
        <div class="envelope-wrapper">
            <div class="envelope-body"></div>
            <div class="envelope-edge-shadow"></div>
            <div class="envelope-lining"></div>
            <div class="envelope-card" id="envelopeCard">
                <!-- Corner flourishes -->
                <div class="card-corner cc-tl"><svg viewBox="0 0 30 30"><path d="M2 28 Q2 2 28 2 L24 2 Q4 4 4 24 L2 28Z M8 2 Q2 2 2 8 L2 5 Q3 3 5 2Z"/></svg></div>
                <div class="card-corner cc-tr"><svg viewBox="0 0 30 30"><path d="M2 28 Q2 2 28 2 L24 2 Q4 4 4 24 L2 28Z M8 2 Q2 2 2 8 L2 5 Q3 3 5 2Z"/></svg></div>
                <div class="card-corner cc-bl"><svg viewBox="0 0 30 30"><path d="M2 28 Q2 2 28 2 L24 2 Q4 4 4 24 L2 28Z M8 2 Q2 2 2 8 L2 5 Q3 3 5 2Z"/></svg></div>
                <div class="card-corner cc-br"><svg viewBox="0 0 30 30"><path d="M2 28 Q2 2 28 2 L24 2 Q4 4 4 24 L2 28Z M8 2 Q2 2 2 8 L2 5 Q3 3 5 2Z"/></svg></div>

                <p class="card-bismillah">بِسْمِ اللَّهِ</p>
                <div class="card-divider"></div>
                <div class="card-names">
                    محمود
                    <span class="card-and">&amp;</span>
                    رنيم
                </div>
                <div class="card-divider"></div>
                <p class="card-date">28 · 03 · 2026</p>
            </div>
            <div class="envelope-flap-left"></div>
            <div class="envelope-flap-right"></div>
            <div class="envelope-flap-bottom"></div>
            <div class="envelope-flap-top" id="envelopeFlap">
                <div class="flap-face flap-front"></div>
                <div class="flap-face flap-back"></div>
            </div>
            <div class="flap-crease-shadow" id="flapShadow"></div>
            <div class="envelope-seal" id="envelopeSeal">
                <div class="seal-body">
                    <div class="seal-rim"></div>
                    <div class="seal-inner-ring"></div>
                    <span class="seal-monogram">M <span class="seal-monogram-amp">&amp;</span> R</span>
                </div>
                <div class="seal-half seal-half-left"><div class="seal-half-inner"></div></div>
                <div class="seal-half seal-half-right"><div class="seal-half-inner"></div></div>
                <span class="seal-hint">TAP TO OPEN</span>
            </div>
        </div>
        <div class="envelope-particles" id="envelopeParticles"></div>
    </div>

    <!-- ═══════ LANG TOGGLE ═══════ -->
    <div class="lang-toggle" id="langToggle">
        <button class="lang-btn" id="langBtn" onclick="toggleLanguage()">English</button>
    </div>

    <!-- ═══════ HERO ═══════ -->
    <section class="hero" id="home">
        <div class="hero-pattern"></div>
        <div id="heroParticles"></div>
        <div class="hero-content">
            <p class="bismillah" data-anim>بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</p>

            <p class="quran-verse" data-anim>﴿وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجًا لِّتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُم مَّوَدَّةً وَرَحْمَةً ۚ إِنَّ فِي ذَٰلِكَ لَآيَاتٍ لِّقَوْمٍ يَتَفَكَّرُونَ﴾<br><span class="verse-ref">[ الروم: ٢١ ]</span></p>

            <div class="hero-ornament" data-anim>
                <div class="hero-ornament-line"></div>
                <div class="hero-ornament-diamond"></div>
                <div class="hero-ornament-line"></div>
            </div>

            <p class="invite-text" data-anim data-ar="بكل فرحٍ وسرور، نتشرّف بدعوتكم لمشاركتنا أجمل لحظات حياتنا" data-en="With great joy and honour, you are cordially invited to celebrate the union of">بكل فرحٍ وسرور، نتشرّف بدعوتكم لمشاركتنا أجمل لحظات حياتنا</p>

            <h1 class="couple-names" data-anim>
                <span data-ar="محمود" data-en="Mahmoud">محمود</span>
                <span class="couple-and" data-ar="و" data-en="&amp;">و</span>
                <span data-ar="رنيم" data-en="Ranim">رنيم</span>
            </h1>

            <p class="wedding-date-hero" data-anim>٢٨ · مارس · ٢٠٢٦</p>

            <div class="adults-notice" data-anim>
                <span data-ar="جنّة الأطفال منازلهم" data-en="Adults Only Event">جنّة الأطفال منازلهم</span>
                <span class="adults-sub" data-ar="نرجو عدم اصطحاب الأطفال" data-en="We kindly request no children attend">نرجو عدم اصطحاب الأطفال</span>
            </div>
        </div>

        <div class="scroll-cue" data-anim>
            <span data-ar="اكتشف المزيد" data-en="Scroll">اكتشف المزيد</span>
            <div class="scroll-cue-line"></div>
        </div>
    </section>

    <!-- ═══════ COUNTDOWN ═══════ -->
    <section class="countdown-section" id="countdown">
        <div class="section-border-top"></div>

        <!-- Arabesque ornament SVG -->
        <svg class="ornament-svg" viewBox="0 0 200 30" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 15 Q25 0 50 15 T100 15 T150 15 T200 15" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
            <circle cx="100" cy="15" r="3" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
            <path d="M85 15 L100 5 L115 15 L100 25Z" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.2" style="color:var(--gold-muted)"/>
        </svg>

        <p class="section-title-sm" data-ar="العد التنازلي" data-en="COUNTING DOWN" style="margin-top:2rem">العد التنازلي</p>

        <div class="countdown-wrap">
            <div class="cd-item">
                <span class="cd-num" id="days">00</span>
                <span class="cd-label" data-ar="يوم" data-en="Days">يوم</span>
            </div>
            <div class="cd-item">
                <span class="cd-num" id="hours">00</span>
                <span class="cd-label" data-ar="ساعة" data-en="Hours">ساعة</span>
            </div>
            <div class="cd-item">
                <span class="cd-num" id="minutes">00</span>
                <span class="cd-label" data-ar="دقيقة" data-en="Minutes">دقيقة</span>
            </div>
            <div class="cd-item">
                <span class="cd-num" id="seconds">00</span>
                <span class="cd-label" data-ar="ثانية" data-en="Seconds">ثانية</span>
            </div>
        </div>
    </section>

    <!-- ═══════ DETAILS ═══════ -->
    <section class="details-section" id="details">
        <div class="section-border-top"></div>
        <div class="section-head">
            <h2 data-ar="تفاصيل الحفل" data-en="Wedding Details">تفاصيل الحفل</h2>
            <svg class="ornament-svg" viewBox="0 0 200 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 15 Q25 0 50 15 T100 15 T150 15 T200 15" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
                <circle cx="100" cy="15" r="3" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
                <path d="M85 15 L100 5 L115 15 L100 25Z" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.2" style="color:var(--gold-muted)"/>
            </svg>
        </div>
        <div class="details-grid">
            <div class="d-card">
                <div class="d-icon"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="3" y1="10" x2="21" y2="10"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="16" y1="2" x2="16" y2="6"/></svg></div>
                <h3 data-ar="التاريخ" data-en="Date">التاريخ</h3>
                <p data-ar="السبت، ٢٨ مارس ٢٠٢٦" data-en="Saturday, March 28, 2026">السبت، ٢٨ مارس ٢٠٢٦</p>
            </div>
            <div class="d-card">
                <div class="d-icon"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><circle cx="12" cy="9" r="2.5"/></svg></div>
                <h3 data-ar="المكان" data-en="Venue">المكان</h3>
                <p>Trondheimsveien 48F<br>2007 Kjeller</p>
            </div>
            <div class="d-card">
                <div class="d-icon"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
                <h3 data-ar="الموعد" data-en="Time">الموعد</h3>
                <p data-ar="الحفل الساعة ١٧:٠٠" data-en="Ceremony at 17:00">الحفل الساعة ١٧:٠٠</p>
            </div>
        </div>
    </section>

    <!-- ═══════ RSVP ═══════ -->
    <section class="rsvp-section" id="rsvp">
        <div class="section-border-top"></div>
        <div class="section-head">
            <h2 data-ar="تأكيد الحضور" data-en="RSVP">تأكيد الحضور</h2>
            <svg class="ornament-svg" viewBox="0 0 200 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 15 Q25 0 50 15 T100 15 T150 15 T200 15" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
                <circle cx="100" cy="15" r="3" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
                <path d="M85 15 L100 5 L115 15 L100 25Z" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.2" style="color:var(--gold-muted)"/>
            </svg>
        </div>
        <div class="rsvp-box">
            <form class="rsvp-form" id="rsvpForm">
                <input class="input-field" type="text" data-placeholder-ar="الاسم الكامل" data-placeholder-en="Your full name" placeholder="الاسم الكامل" required>
                <button type="submit" class="submit-btn"><span data-ar="تأكيد الحضور" data-en="Confirm Attendance">تأكيد الحضور</span></button>
            </form>
            <div class="rsvp-success" id="rsvpSuccess">
                <h3 data-ar="شكراً لكم!" data-en="Thank You!">شكراً لكم!</h3>
                <p data-ar="لقد تلقينا ردكم ونتطلع لرؤيتكم!" data-en="We have received your response and look forward to seeing you!">لقد تلقينا ردكم ونتطلع لرؤيتكم!</p>
            </div>
        </div>
    </section>

    <!-- ═══════ MAP ═══════ -->
    <section class="map-section" id="map">
        <div class="section-border-top"></div>
        <div class="section-head">
            <h2 data-ar="الموقع" data-en="Location">الموقع</h2>
            <svg class="ornament-svg" viewBox="0 0 200 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 15 Q25 0 50 15 T100 15 T150 15 T200 15" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
                <circle cx="100" cy="15" r="3" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
                <path d="M85 15 L100 5 L115 15 L100 25Z" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.2" style="color:var(--gold-muted)"/>
            </svg>
        </div>
        <div class="map-frame">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1997.6!2d11.0481!3d59.9297!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46417515a9b6c7d1%3A0x2!2sTrondheimsveien+48F%2C+2007+Kjeller!5e0!3m2!1sen!2sno!4v1" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </section>

    <!-- ═══════ FOOTER ═══════ -->
    <footer class="site-footer">
        <div class="section-border-top"></div>
        <svg class="ornament-svg" viewBox="0 0 200 30" xmlns="http://www.w3.org/2000/svg" style="margin-bottom:2.5rem">
            <path d="M0 15 Q25 0 50 15 T100 15 T150 15 T200 15" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
            <circle cx="100" cy="15" r="3" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.3" style="color:var(--gold-muted)"/>
            <path d="M85 15 L100 5 L115 15 L100 25Z" fill="none" stroke="currentColor" stroke-width="0.5" opacity="0.2" style="color:var(--gold-muted)"/>
        </svg>
        <p class="footer-names" data-ar="محمود و رنيم" data-en="Mahmoud & Ranim">محمود و رنيم</p>
        <p class="footer-date">28 · 03 · 2026</p>
        <div class="footer-heart">♥</div>
    </footer>

    <!-- ═══════════════════════════════════════════ -->
    <script>
    /* ═══════════════
       LANGUAGE
       ═══════════════ */
    let currentLang = 'ar';
    function toggleLanguage() {
        currentLang = currentLang === 'ar' ? 'en' : 'ar';
        const btn = document.getElementById('langBtn');
        const html = document.documentElement;
        const body = document.body;

        if (currentLang === 'en') {
            html.setAttribute('lang', 'en');
            html.setAttribute('dir', 'ltr');
            body.setAttribute('dir', 'ltr');
            btn.textContent = 'العربية';
            document.title = 'Mahmoud & Ranim – Wedding Invitation';
        } else {
            html.setAttribute('lang', 'ar');
            html.setAttribute('dir', 'rtl');
            body.setAttribute('dir', 'rtl');
            btn.textContent = 'English';
            document.title = 'محمود و رنيم – دعوة زفاف';
        }

        document.querySelectorAll('[data-ar][data-en]').forEach(el => {
            el.tagName === 'OPTION'
                ? el.textContent = el.getAttribute('data-' + currentLang)
                : el.innerHTML = el.getAttribute('data-' + currentLang);
        });
        document.querySelectorAll('[data-placeholder-ar][data-placeholder-en]').forEach(el => {
            el.placeholder = el.getAttribute('data-placeholder-' + currentLang);
        });
    }

    /* ═══════════════
       LENIS
       ═══════════════ */
    const lenis = new Lenis({
        duration: 1.5,
        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        smoothWheel: true
    });
    function raf(t) { lenis.raf(t); requestAnimationFrame(raf); }
    requestAnimationFrame(raf);
    lenis.on('scroll', ScrollTrigger.update);
    gsap.ticker.add(t => lenis.raf(t * 1000));
    gsap.ticker.lagSmoothing(0);

    /* ═══════════════
       ENVELOPE
       ═══════════════ */
    window.addEventListener('load', () => {
        const overlay = document.getElementById('envelopeOverlay');
        const seal = document.getElementById('envelopeSeal');
        const sealBody = seal.querySelector('.seal-body');
        const sealRim = seal.querySelector('.seal-rim');
        const sealInnerRing = seal.querySelector('.seal-inner-ring');
        const sealHalfLeft = seal.querySelector('.seal-half-left');
        const sealHalfRight = seal.querySelector('.seal-half-right');
        const sealHint = seal.querySelector('.seal-hint');
        const flap = document.getElementById('envelopeFlap');
        const flapShadow = document.getElementById('flapShadow');
        const card = document.getElementById('envelopeCard');

        let opened = false;

        // Font load
        Promise.all([
            document.fonts.load('400 1rem "Aref Ruqaa"'),
            document.fonts.load('400 1rem "Montserrat"'),
            document.fonts.load('300 1rem "Cormorant Garamond"'),
            document.fonts.load('400 1rem "Playfair Display"'),
            document.fonts.load('400 1rem "Great Vibes"')
        ]).then(() => document.body.classList.add('fonts-loaded'))
          .catch(() => document.body.classList.add('fonts-loaded'));
        setTimeout(() => document.body.classList.add('fonts-loaded'), 2500);

        // tsParticles
        if (typeof tsParticles !== 'undefined') {
            tsParticles.load("envelopeParticles", {
                fullScreen: false,
                particles: {
                    number: { value: 30, density: { enable: true, area: 800 } },
                    color: { value: ["#C8A97D", "#E8D5B5", "#D4B560", "#B89848", "#F0E6D3"] },
                    shape: { type: "circle" },
                    opacity: { value: { min: 0.03, max: 0.2 }, animation: { enable: true, speed: 0.25, minimumValue: 0.02 } },
                    size: { value: { min: 0.8, max: 3 }, animation: { enable: true, speed: 0.8, minimumValue: 0.4 } },
                    move: { enable: true, speed: { min: 0.08, max: 0.35 }, direction: "top", outModes: { default: "out" }, random: true },
                    wobble: { enable: true, distance: 8, speed: 1.5 },
                    tilt: { enable: true, value: { min: 0, max: 360 }, animation: { enable: true, speed: 5 } },
                    life: { duration: { sync: false, value: { min: 6, max: 14 } }, count: 0 }
                },
                detectRetina: true
            });

            tsParticles.load("heroParticles", {
                fullScreen: false,
                particles: {
                    number: { value: 45, density: { enable: true, area: 1000 } },
                    color: { value: ["#C8A97D", "#E8D5B5", "#9E8A6A"] },
                    shape: { type: "circle" },
                    opacity: { value: { min: 0.015, max: 0.1 }, animation: { enable: true, speed: 0.15, minimumValue: 0.008 } },
                    size: { value: { min: 0.8, max: 2.2 }, animation: { enable: true, speed: 0.4, minimumValue: 0.3 } },
                    move: { enable: true, speed: { min: 0.04, max: 0.2 }, direction: "none", outModes: { default: "out" }, random: true, straight: false },
                    wobble: { enable: true, distance: 12, speed: 1 }
                },
                detectRetina: true
            });
        }

        seal.classList.add('seal-breathing');

        function open() {
            if (opened) return;
            opened = true;
            seal.classList.remove('seal-breathing');
            gsap.to(sealHint, { opacity: 0, duration: 0.12 });

            const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

            // 1. Tap feedback
            tl.to(overlay, { scale: 0.985, duration: 0.07, ease: "power2.in" })
              .to(overlay, { scale: 1, duration: 0.14, ease: "elastic.out(1.2, 0.5)" })

            // 2. Seal trembles
            .to(seal, { x: -3, duration: 0.035, ease: "none" }, "+=0.08")
            .to(seal, { x: 3, duration: 0.035, ease: "none" })
            .to(seal, { x: -5, duration: 0.035, ease: "none" })
            .to(seal, { x: 5, duration: 0.035, ease: "none" })
            .to(seal, { x: -3, duration: 0.035, ease: "none" })
            .to(seal, { x: 2, duration: 0.035, ease: "none" })
            .to(seal, { x: 0, duration: 0.035, ease: "none" })

            // 3. Seal cracks and breaks
            .add(() => seal.classList.add('breaking'), "+=0.04")
            .to(sealBody, { opacity: 0, scale: 1.08, duration: 0.22, ease: "power2.out" })
            .to(sealRim, { opacity: 0, duration: 0.15 }, "<")
            .to(sealInnerRing, { opacity: 0, duration: 0.15 }, "<")
            .to(sealHalfLeft, { x: -22, y: 18, rotation: -30, opacity: 0, duration: 0.65 }, "<0.04")
            .to(sealHalfRight, { x: 22, y: 18, rotation: 30, opacity: 0, duration: 0.65 }, "<")

            // 4. Flap opens with 3D rotation
            .to(flap, { rotateX: -178, duration: 1.5, ease: "power2.inOut" }, "-=0.25")
            .to(flapShadow, { opacity: 0, duration: 0.5 }, "<0.2")

            // 5. Card rises out
            .to(card, { y: "-52%", opacity: 1, duration: 1.1, ease: "power3.out" }, "-=0.45")

            // 6. Hold, then envelope exits
            .to(overlay, { y: "-100vh", duration: 1.8, ease: "power4.inOut" }, "+=1.5")
            .add(() => {
                overlay.classList.add('done');
                overlay.style.pointerEvents = 'none';
                revealHero();
            });
        }

        seal.addEventListener('click', e => { e.stopPropagation(); open(); });
        overlay.addEventListener('click', open);
    });

    /* ═══════════════
       HERO REVEAL
       ═══════════════ */
    function revealHero() {
        const els = document.querySelectorAll('.hero [data-anim]');
        const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

        els.forEach((el, i) => {
            tl.fromTo(el,
                { opacity: 0, y: 35, filter: 'blur(4px)' },
                { opacity: 1, y: 0, filter: 'blur(0px)', duration: 0.9 },
                i * 0.12
            );
        });
    }

    /* ═══════════════
       SCROLL ANIMATIONS (ScrollTrigger)
       ═══════════════ */
    gsap.registerPlugin(ScrollTrigger);

    // Ornament SVGs
    gsap.utils.toArray('.ornament-svg').forEach(svg => {
        gsap.from(svg, {
            scrollTrigger: { trigger: svg, start: 'top 88%', toggleActions: 'play none none none' },
            scaleX: 0, opacity: 0, duration: 0.9, ease: 'power3.out'
        });
    });

    // Countdown numbers — count up from 0
    gsap.from('.countdown-wrap', {
        scrollTrigger: { trigger: '.countdown-section', start: 'top 80%', toggleActions: 'play none none none' },
        opacity: 0, y: 45, duration: 1, ease: 'power3.out'
    });

    // Section titles
    gsap.utils.toArray('.section-title-sm').forEach(t => {
        gsap.from(t, {
            scrollTrigger: { trigger: t, start: 'top 88%', toggleActions: 'play none none none' },
            opacity: 0, y: 15, duration: 0.7, ease: 'power3.out'
        });
    });

    // Section headings
    gsap.utils.toArray('.section-head').forEach(h => {
        gsap.from(h, {
            scrollTrigger: { trigger: h, start: 'top 85%', toggleActions: 'play none none none' },
            opacity: 0, y: 30, duration: 0.8, ease: 'power3.out'
        });
    });

    // Detail cards — stagger
    gsap.from('.d-card', {
        scrollTrigger: { trigger: '.details-grid', start: 'top 80%', toggleActions: 'play none none none' },
        opacity: 0, y: 55, duration: 0.85, stagger: 0.18, ease: 'power3.out'
    });

    // RSVP box
    gsap.from('.rsvp-box', {
        scrollTrigger: { trigger: '.rsvp-section', start: 'top 75%', toggleActions: 'play none none none' },
        opacity: 0, y: 45, duration: 0.85, ease: 'power3.out'
    });

    // Map
    gsap.from('.map-frame', {
        scrollTrigger: { trigger: '.map-section', start: 'top 80%', toggleActions: 'play none none none' },
        opacity: 0, y: 35, duration: 0.85, ease: 'power3.out'
    });

    // Footer
    gsap.from('.footer-names', {
        scrollTrigger: { trigger: '.site-footer', start: 'top 88%', toggleActions: 'play none none none' },
        opacity: 0, y: 20, duration: 0.8, ease: 'power3.out'
    });

    // Section top borders — draw in
    gsap.utils.toArray('.section-border-top').forEach(b => {
        gsap.from(b, {
            scrollTrigger: { trigger: b, start: 'top 95%', toggleActions: 'play none none none' },
            scaleX: 0, duration: 1.2, ease: 'power3.inOut'
        });
    });

    /* ═══════════════
       PARALLAX
       ═══════════════ */
    gsap.to('.hero-pattern', {
        scrollTrigger: {
            trigger: '.hero', start: 'top top', end: 'bottom top',
            scrub: 0.5
        },
        y: 120, ease: 'none'
    });

    /* ═══════════════
       COUNTDOWN TIMER
       ═══════════════ */
    const weddingDate = new Date('2026-03-28T17:00:00').getTime();
    function updateCountdown() {
        const diff = weddingDate - Date.now();
        if (diff > 0) {
            const d = Math.floor(diff / 864e5);
            const h = Math.floor((diff % 864e5) / 36e5);
            const m = Math.floor((diff % 36e5) / 6e4);
            const s = Math.floor((diff % 6e4) / 1e3);
            document.getElementById('days').textContent = String(d).padStart(2, '0');
            document.getElementById('hours').textContent = String(h).padStart(2, '0');
            document.getElementById('minutes').textContent = String(m).padStart(2, '0');
            document.getElementById('seconds').textContent = String(s).padStart(2, '0');
        }
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);

    /* ═══════════════
       GOOGLE FORM
       ═══════════════ */
    const FORM_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSe3q3PcP8I3dX_DaBHd4pGOfPryzw6CFwyfXe7CY8aRafeg2Q/formResponse';
    const E_NAME = 'entry.1614466646';
    const E_ATTEND = 'entry.609990609';

    const gIframe = document.createElement('iframe');
    gIframe.name = 'hidden_iframe';
    gIframe.id = 'hidden_iframe';
    gIframe.style.display = 'none';
    document.body.appendChild(gIframe);

    document.getElementById('rsvpForm').addEventListener('submit', e => {
        e.preventDefault();
        const name = e.target.querySelector('input[type="text"]').value;

        const gf = document.createElement('form');
        gf.method = 'POST'; gf.action = FORM_URL; gf.target = 'hidden_iframe';
        [{ n: E_NAME, v: name }, { n: E_ATTEND, v: 'Yes' }].forEach(f => {
            const inp = document.createElement('input');
            inp.type = 'hidden'; inp.name = f.n; inp.value = f.v;
            gf.appendChild(inp);
        });
        document.body.appendChild(gf);
        gf.submit();
        document.body.removeChild(gf);

        const formEl = document.getElementById('rsvpForm');
        const successEl = document.getElementById('rsvpSuccess');
        gsap.to(formEl, {
            opacity: 0, y: -20, duration: 0.4, ease: 'power2.in',
            onComplete: () => {
                formEl.style.display = 'none';
                successEl.classList.add('show');
                gsap.fromTo(successEl,
                    { opacity: 0, y: 25, scale: 0.95 },
                    { opacity: 1, y: 0, scale: 1, duration: 0.7, ease: 'power3.out' }
                );
            }
        });
    });
    </script>
</body>
</html>
